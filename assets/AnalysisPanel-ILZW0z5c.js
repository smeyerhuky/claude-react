import{r as f,j as e,f as u,n as p,o as N,g as S}from"./index-CJbHX0Ru.js";import{P as C}from"./progress-DeXdwjJT.js";const g=f.memo(({label:t,value:l,unit:o=""})=>e.jsxs("div",{className:"bg-black/30 rounded-lg p-3 text-center border border-gray-700",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-400",children:[l,o]}),e.jsx("div",{className:"text-sm text-gray-400",children:t})]}));g.displayName="StatItem";const v=f.memo(({currentKey:t,targetKey:l})=>{const o=f.useRef(null);return f.useEffect(()=>{const i=o.current;if(!i)return;const s=i.getContext("2d"),r=i.width/2,c=i.height/2,n=Math.min(r,c)-20;s.clearRect(0,0,i.width,i.height);const a=s.createConicGradient(0,r,c);a.addColorStop(0,"#ff6b6b"),a.addColorStop(.083,"#4ecdc4"),a.addColorStop(.167,"#45b7d1"),a.addColorStop(.25,"#96ceb4"),a.addColorStop(.333,"#ffeaa7"),a.addColorStop(.417,"#fab1a0"),a.addColorStop(.5,"#fd79a8"),a.addColorStop(.583,"#a29bfe"),a.addColorStop(.667,"#6c5ce7"),a.addColorStop(.75,"#74b9ff"),a.addColorStop(.833,"#00b894"),a.addColorStop(.917,"#00cec9"),a.addColorStop(1,"#ff6b6b"),s.strokeStyle=a,s.lineWidth=20,s.beginPath(),s.arc(r,c,n,0,2*Math.PI),s.stroke(),s.strokeStyle="rgba(255, 255, 255, 0.2)",s.lineWidth=2,s.beginPath(),s.arc(r,c,n-10,0,2*Math.PI),s.stroke(),s.beginPath(),s.arc(r,c,n+10,0,2*Math.PI),s.stroke();const h=["C","G","D","A","E","B","F#","C#","G#","D#","A#","F"],d={};if(h.forEach((x,m)=>{d[x]=(m*30-90)*Math.PI/180}),t){const x=t.split(" ")[0],m=d[x]||0,j=r+Math.cos(m)*n,b=c+Math.sin(m)*n;s.fillStyle="#00ff9d",s.strokeStyle="#000",s.lineWidth=3,s.beginPath(),s.arc(j,b,8,0,2*Math.PI),s.fill(),s.stroke()}if(l){const x=l.split(" ")[0],m=d[x]||0,j=r+Math.cos(m)*n,b=c+Math.sin(m)*n;s.fillStyle="#ff6b6b",s.strokeStyle="#000",s.lineWidth=3,s.beginPath(),s.arc(j,b,8,0,2*Math.PI),s.fill(),s.stroke()}},[t,l]),e.jsxs("div",{className:"relative mx-auto",children:[e.jsx("canvas",{ref:o,width:180,height:180,className:"w-full h-full"}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 flex justify-center gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-400 rounded-full"}),e.jsx("span",{className:"text-gray-400",children:"Current"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-red-400 rounded-full"}),e.jsx("span",{className:"text-gray-400",children:"Target"})]})]})]})});v.displayName="HarmonicWheel";const M=f.memo(({chain:t,compatibility:l,onFrequencyCanvasReady:o,currentKey:i="C Major",targetKey:s="G Major"})=>{const r=f.useRef(null);f.useEffect(()=>{r.current&&(o==null||o(r.current))},[o]);const c=t.reduce((h,d)=>h+d.duration,0),n=t.length>0?Math.round(t.reduce((h,d)=>h+d.tempo,0)/t.length):0,a=h=>{const d=Math.floor(h/60),x=Math.floor(h%60);return`${d}:${x.toString().padStart(2,"0")}`};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(u,{className:"bg-gray-900/95 border-gray-700",children:[e.jsx(p,{className:"pb-3",children:e.jsx(N,{className:"text-green-400",children:"Real-Time Analysis"})}),e.jsx(S,{children:e.jsx("div",{className:"h-24 bg-black rounded-lg overflow-hidden border border-gray-700",children:e.jsx("canvas",{ref:r,className:"w-full h-full",id:"frequency-canvas"})})})]}),e.jsxs(u,{className:"bg-gray-900/95 border-gray-700",children:[e.jsx(p,{className:"pb-3",children:e.jsx(N,{className:"text-green-400",children:"Harmonic Matching"})}),e.jsx(S,{children:e.jsx(v,{currentKey:i,targetKey:s})})]}),e.jsxs(u,{className:"bg-gray-900/95 border-gray-700",children:[e.jsx(p,{className:"pb-3",children:e.jsx(N,{className:"text-green-400",children:"Chain Statistics"})}),e.jsxs(S,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(g,{label:"Tracks",value:t.length}),e.jsx(g,{label:"Duration",value:a(c)}),e.jsx(g,{label:"Avg BPM",value:n}),e.jsx(g,{label:"Compatible",value:Math.round(l*100),unit:"%"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{className:"text-gray-400",children:"Compatibility Score"}),e.jsxs("span",{className:"text-green-400",children:[Math.round(l*100),"%"]})]}),e.jsx(C,{value:l*100,className:"h-2"}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:l>.8?"✅ Excellent flow!":l>.6?"ℹ️ Good compatibility":"⚠️ Consider BPM/key adjustments"})]})]})]})]})});M.displayName="AnalysisPanel";export{M as AnalysisPanel};
