import{c as w,r as l,j as e,C as p,a as y,R as N,B as b,P as I,S as E,h as S,i as T,k as D,l as o,m}from"./index-71EdIMDT.js";import{S as M}from"./scroll-area-zNbI3kKV.js";import{M as O}from"./music-ws1k2LgB.js";import{T as P}from"./trash-2-CKXb38Nv.js";/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],z=w("square-pen",B),C=l.memo(({track:s,isLast:t,onPlay:x,onEdit:u,onRemove:j,onTransitionChange:g,onWaveformReady:i,onSpectrogramReady:n})=>{const d=l.useRef(null),r=l.useRef(null),f=c=>{const v=Math.floor(c/60),a=Math.floor(c%60);return`${v}:${a.toString().padStart(2,"0")}`};return N.useEffect(()=>{d.current&&(i==null||i(s.chainId,d.current))},[s.chainId,i]),N.useEffect(()=>{r.current&&(n==null||n(s.chainId,r.current))},[s.chainId,n]),e.jsxs("div",{className:"relative group",children:[e.jsx(p,{className:"bg-gradient-to-br from-gray-800 to-gray-900 border-gray-700 hover:border-purple-500 transition-all hover:-translate-y-1 hover:shadow-xl hover:shadow-purple-500/20",children:e.jsxs(y,{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-green-400",children:s.name}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(b,{size:"sm",variant:"outline",onClick:()=>x(s.id),className:"hover:bg-green-600 hover:text-white",children:[e.jsx(I,{className:"w-4 h-4 mr-1"})," Play"]}),e.jsxs(b,{size:"sm",variant:"outline",onClick:()=>u(s.chainId),className:"hover:bg-blue-600 hover:text-white",children:[e.jsx(z,{className:"w-4 h-4 mr-1"})," Edit"]}),e.jsx(b,{size:"sm",variant:"outline",onClick:()=>j(s.chainId),className:"hover:bg-red-600 hover:text-white",children:e.jsx(P,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"h-20 bg-black/50 rounded-lg mb-4 overflow-hidden border border-gray-700",children:e.jsx("canvas",{ref:d,className:"w-full h-full",id:`waveform_${s.chainId}`})}),e.jsx("div",{className:"h-24 bg-black/50 rounded-lg mb-4 overflow-hidden border border-gray-700",children:e.jsx("canvas",{ref:r,className:"w-full h-full",id:`spectrogram_${s.chainId}`})}),e.jsx("div",{className:"bg-black/30 rounded-lg p-4",children:e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 items-center",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-400",children:"Transition:"}),e.jsxs(E,{value:s.transitionType,onValueChange:c=>g(s.chainId,c),children:[e.jsx(S,{className:"mt-1",children:e.jsx(T,{})}),e.jsxs(D,{children:[e.jsx(o,{value:m.CROSSFADE,children:"Crossfade"}),e.jsx(o,{value:m.CUT,children:"Hard Cut"}),e.jsx(o,{value:m.ECHO,children:"Echo Fade"}),e.jsx(o,{value:m.FILTER,children:"Filter Sweep"}),e.jsx(o,{value:m.REVERSE,children:"Reverse"})]})]})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Duration:"}),e.jsx("div",{className:"font-semibold",children:f(s.duration)})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"BPM:"}),e.jsx("div",{className:"font-semibold",children:s.tempo})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Key:"}),e.jsx("div",{className:"font-semibold",children:s.key})]})]})})]})}),!t&&e.jsx("div",{className:"absolute -bottom-5 right-1/2 translate-x-1/2 z-10",children:e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-red-500 to-cyan-500 rounded-full flex items-center justify-center text-white font-bold shadow-lg hover:scale-110 transition-transform cursor-pointer",children:"ðŸ”„"})})]})});C.displayName="ChainTrack";const L=l.memo(({chain:s,onDrop:t,onTrackPlay:x,onTrackEdit:u,onTrackRemove:j,onTransitionChange:g,onWaveformReady:i,onSpectrogramReady:n})=>{const[d,r]=l.useState(!1),f=l.useCallback(a=>{a.preventDefault(),r(!0)},[]),c=l.useCallback(()=>{r(!1)},[]),v=l.useCallback(a=>{a.preventDefault(),r(!1);const h=a.dataTransfer.getData("trackId");h&&(t==null||t(h))},[t]);return e.jsx(p,{className:"h-full bg-gray-900/95 border-gray-700",children:e.jsxs(y,{className:"p-0 h-full flex flex-col",children:[e.jsx("div",{className:"p-4 border-b border-gray-700",children:e.jsx("h3",{className:"text-lg font-bold text-purple-400",children:"Chain Builder"})}),e.jsx(M,{className:"flex-1 p-4",children:e.jsx("div",{onDragOver:f,onDragLeave:c,onDrop:v,className:"min-h-full",children:s.length===0?e.jsx("div",{className:`
                  min-h-[200px] border-2 border-dashed rounded-xl
                  flex items-center justify-center transition-all
                  ${d?"border-green-400 bg-green-500/10 scale-105":"border-gray-600 bg-gray-800/20"}
                `,children:e.jsxs("div",{className:"text-center text-gray-400",children:[e.jsx(O,{className:"w-12 h-12 mx-auto mb-4"}),e.jsx("p",{className:"text-xl mb-2",children:"ðŸŽµ Drag audio files here to build your EDM chain"}),e.jsx("p",{className:"text-sm",children:"Supports MP3, WAV, OGG formats"}),e.jsx("p",{className:"text-sm mt-2",children:"Start with major tracks, then add fillers and samples"})]})}):e.jsx("div",{className:"space-y-8 pb-8",children:s.map((a,h)=>e.jsx(C,{track:a,index:h,isLast:h===s.length-1,onPlay:x,onEdit:u,onRemove:j,onTransitionChange:g,onWaveformReady:i,onSpectrogramReady:n},a.chainId))})})})]})})});L.displayName="ChainBuilder";export{L as ChainBuilder};
